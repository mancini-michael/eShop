<div class="container-md">
  <div class="d-flex align-items-center justify-content-between my-5 px-5">
    <div>
      <% if Seller.find_by(user_id: @user) %>          
        <div>
          <h2 class="fw-bold">
            (<%= Seller.total_reviews(Seller.find_by(user_id: @user).id) %>) <%= Seller.average_rating(Seller.find_by(user_id: @user).id) %>
            <i class="fa-solid fa-star fa-2xs"></i>     
          </h2>
        </div>
      <% end %>
      <h5 class="mb-0"><%= @user.first_name %> <%= @user.last_name %></h5>
      <h6 class="mb-0"><%= @user.zip_code %>, <%= @user.city %></h6>
      <p class="fw-light fst-italic mb-0"><%= @user.email %></p>
      <% if user_signed_in? && current_user == @user %>        
        <%= link_to edit_user_registration_path do %>
          modifica
        <% end %>
      <% end %>
    </div>
    <% if Seller.find_by(user_id: @user) %>   
      <div class="d-inline-flex">
        <% if !Seller.find_by(user_id: @user).active %>
          <span class="fw-bold">Venditore attualmente non attivo</span>
        <% else %>
          <% if user_signed_in? && current_user == @user %>
            <button class="dropdown-item me-3" data-bs-toggle="modal" data-bs-target="#insertion">
              <span class="btn btn-success">vendi</span>
            </button>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
  <% if Seller.find_by(user_id: @user) %>   
    <%= render "shared/create" %>
    <h3 class="mb-3">I tuoi annunci</h3>
    <div class="row row-cols-4">
      <% @insertions.each do |item| %>
        <div class="col mx-auto mb-4">
          <div class="card border-0 p-0">
            <img src="https://a0.muscache.com/im/pictures/c0e10c8f-d0c3-4875-bae8-0f664a55bbc6.jpg?im_w=720" class="card-img-top img-fluid mb-2" alt="...">
            <div class="card-body lh-1 p-0">
              <div class="d-flex justify-content-between align-items-center mb-1">
                <h6 class="card-title mb-0"><%= item.title %></h6>
                <span class="fw-bold"><%= sprintf('%.2f', item.price) %> â‚¬</span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-light"><%= Insertion.seller_name(item.seller_id) %></span>
                <div class="rating d-inline-flex align-items-center">
                  <% if Seller.average_rating(item.seller_id) == 0 %>
                    <span class="fw-light">Nessuna recensione</span>
                  <% else%>
                    <span class="fw-bold">(<%= Seller.total_reviews(item.seller_id) %>) <%= Seller.average_rating(item.seller_id) %></span>
                    <i class="fa-solid fa-star fa-2xs"></i>          
                  <% end %>
                </div>
              </div>
            </div>
            <% if user_signed_in? && current_user == @user %>              
              <div class="d-flex justify-content-evenly mt-3">
                <%= button_to destroy_insertion_path(item.id), method: :delete, class: "btn btn-danger" do %>
                  elimina
                <% end %>
                <span class="btn btn-success">Modifica</span>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>